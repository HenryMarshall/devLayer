<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>DevLayer: A better way to program</title>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="style/style.css">

</head>
<body>

  <script type="text/x-handlebars" data-template-name="application">
    <div class="container-fluid">
      <div class="col-xs-12">
        <h1>DevLayer</h1>
        {{!-- {{#link-to "test" activeClass="selected"}}Test{{/link-to}} --}}
        {{partial "keyboard"}}
      </div>
      <div class="col-xs-4 about">
        <h2>About</h2>
        <p>DevLayer is an alternative keyboard layout that puts frequently used programming keys closer to the homerow. Better yet, it is fully compatable with the layout you already know and use (be it QWERTY, <a href="http://www.colemak.com/">Colemak</a>, <a href="http://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard">Dvorak</a>, or <a href="https://viralintrospection.wordpress.com/2010/09/06/a-different-philosophy-in-designing-keyboard-layouts/">Workman</a>). Instead, you enter programming keys with the right alt modifier.</p>
        <p>DevLayer is designed to be easy to learn. Many characters are struck with the same finger you're used to, while others are intuitively clustered. Vim users will immediately feel at home with the convenient arrangement of arrow keys on the homerow.</p>
        <p>With your current layout, you probably type <code>/?;:'"[]{}\|-_+=0)</code>, backspace, and enter, with a single finger. Test out DevLayer and find out just how much you can improve the multi-threaded performance of your hands!</p>
      </div>

      <div class="col-xs-8">
        {{outlet}}
        {{!-- Text area should be in outlet --}}
        <textarea rows="15" id="corpus">
var App = Ember.Application.create();

$(document).ready(function() {
  var $keyboard = $("#keyboard");
  console.log("$keyboard: ",$keyboard);

  xm.getXmod("/business/layouts/qwertyDevLayerAbridged.txt", function(data) {
    var layout = xm.xmodToLayout(data, xm.config.toPresentation),
        layoutObj = pr.layoutToLayoutObj(layout);
    
    $($keyboard).find(".key").each(function(row) {
      var keycode = $(this).attr("data-keycode"),
          that = this;

      _.each(layoutObj[keycode], function(value, key) {
        if ((key !== "altGrShift" || value !== layoutObj[keycode].altGr &&
                                     value !== layoutObj[keycode].shift) &&
            (key !== "noMod" || value !== layoutObj[keycode].shift &&
                                value.toUpperCase() !== layoutObj[keycode].shift) &&
            (key !== "altGr" || value !== layoutObj[keycode].noMod) &&
            (value !== "NoSymbol")
            ) {

          $("<span />").addClass(key).html(value).appendTo(that);
        }
      });
    })
  });
});
        </textarea>

        <section>
          <div id="callToAction" class="col-xs-4">
            <div id="test-it" class="key">Test it!</div>
            <div id="download" class="key">Download</div>
          </div>

          <div id="options">
            <form id="options">
              <div class="col-xs-4">
                <div class="radio">
                  <label>
                    <input type="radio" name="layout" value="qwerty" checked>
                    <span></span>
                    QWERTY
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="layout" value="colemak">
                    <span></span>
                    Colemak
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="layout" value="dvorak">
                    <span></span>
                    Dvorak
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="layout" value="workman">
                    <span></span>
                    Workman
                  </label>
                </div>
              </div>

              <div class="col-xs-4">

              </div>
            </form>
          </div>
        </section>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="_keyboard">
    <div id="keyboard">
      {{!-- Number row --}}
      <div class="key-row">
        <div data-keycode="49" class="key x1"></div>
        <div data-keycode="10" class="key x1"></div>
        <div data-keycode="11" class="key x1"></div>
        <div data-keycode="12" class="key x1"></div>
        <div data-keycode="13" class="key x1"></div>
        <div data-keycode="14" class="key x1"></div>
        <div data-keycode="15" class="key x1"></div>
        <div data-keycode="16" class="key x1"></div>
        <div data-keycode="17" class="key x1"></div>
        <div data-keycode="18" class="key x1"></div>
        <div data-keycode="19" class="key x1"></div>
        <div data-keycode="20" class="key x1"></div>
        <div data-keycode="21" class="key x1"></div>
        <div data-keycode="22" class="key x2"></div>
      </div>

      {{!-- Top row --}}
      <div class="key-row">
        <div data-keycode="23" class="key x15"></div>
        <div data-keycode="24" class="key x1"></div>
        <div data-keycode="25" class="key x1"></div>
        <div data-keycode="26" class="key x1"></div>
        <div data-keycode="27" class="key x1"></div>
        <div data-keycode="28" class="key x1"></div>
        <div data-keycode="29" class="key x1"></div>
        <div data-keycode="30" class="key x1"></div>
        <div data-keycode="31" class="key x1"></div>
        <div data-keycode="32" class="key x1"></div>
        <div data-keycode="33" class="key x1"></div>
        <div data-keycode="34" class="key x1"></div>
        <div data-keycode="35" class="key x1"></div>
        <div data-keycode="51" class="key x15"></div>
      </div>

      {{!-- Home row --}}
      <div class="key-row">
        <div data-keycode="66" class="key x175"></div>
        <div data-keycode="38" class="key x1"></div>
        <div data-keycode="39" class="key x1"></div>
        <div data-keycode="40" class="key x1"></div>
        <div data-keycode="41" class="key x1"></div>
        <div data-keycode="42" class="key x1"></div>
        <div data-keycode="43" class="key x1"></div>
        <div data-keycode="44" class="key x1"></div>
        <div data-keycode="45" class="key x1"></div>
        <div data-keycode="46" class="key x1"></div>
        <div data-keycode="47" class="key x1"></div>
        <div data-keycode="48" class="key x1"></div>
        <div data-keycode="36" class="key x225"></div>
      </div>

      {{!-- Bottom row --}}
      <div class="key-row">
        <div data-keycode="50" class="key x225"></div>
        <div data-keycode="52" class="key x1"></div>
        <div data-keycode="53" class="key x1"></div>
        <div data-keycode="54" class="key x1"></div>
        <div data-keycode="55" class="key x1"></div>
        <div data-keycode="56" class="key x1"></div>
        <div data-keycode="57" class="key x1 embiggen"></div>
        <div data-keycode="58" class="key x1"></div>
        <div data-keycode="59" class="key x1"></div>
        <div data-keycode="60" class="key x1 embiggen"></div>
        <div data-keycode="61" class="key x1"></div>
        <div data-keycode="62" class="key x275"></div>
      </div>

      {{!-- Space row --}}
      <div class="key-row">
        <div data-keycode="37" class="key x15"></div>
        <div data-keycode="133" class="key x15"></div>
        <div data-keycode="64" class="key x15"></div>
        <div data-keycode="65" class="key x45"></div>
        <div data-keycode="108" class="key x15 devLayer"></div>
        <div data-keycode="134" class="key x15"></div>
        <div data-keycode="135" class="key x15"></div>
        <div data-keycode="105" class="key x15"></div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="test">
    <h1>Test</h1>
  </script>

  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/handlebars/handlebars.min.js"></script>
  <script src="bower_components/ember/ember.min.js"></script>
  <script src="bower_components/ember-data/ember-data.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>

  <script src="business/xmodConverter.js"></script>
  <script src="business/xmodConfig.js"></script>
  <script src="business/analyzer.js"></script>

  <script src="js/app.js"></script>
  <script src="js/router.js"></script>

</body>
</html>